// Header Navigation - Excel-style Grid Recreation
// Using proper SCSS variables and mixins

// Site Header
.site-header {
  background-color: $color-black;
  position: fixed;
  top: 0;
  width: 100%;
  z-index: $z-fixed;
  height: $header-height;
  
  // Full-width top border
  &::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    height: 1px;
    background-color: $color-white;
  }
  
  // Full-width bottom border
  &::after {
    content: '';
    position: absolute;
    bottom: 0;
    left: 0;
    right: 0;
    height: 1px;
    background-color: $color-white;
  }
}

.header-container {
  // Override container to stretch full viewport width
  width: 100vw;
  max-width: none;
  margin: 0;
  padding: 0; // Remove padding, use positioning instead
  position: relative;
  height: $header-height;
}

// Logo Cell - Home link functionality
// Site Branding (Logo)
.site-branding {
  position: absolute;
  left: 33px; // 33px from left edge for visual continuation effect
  top: 50%;
  transform: translateY(-50%);
  
  .logo-cell {
    width: 150px;
    height: $header-height;
    border: 1px solid $color-white;
    border-bottom: none; // Remove bottom border since it's handled by site-header::after
    border-top: none; // Remove top border since it's handled by site-header::before
    @include flex-center;
    background-color: transparent;
    transition: background-color $transition-fast;
    
    &:hover {
      background-color: rgba($color-white, 0.05);
    }
    
    .site-logo img {
      height: 28px;
    }
  }
}

// Navigation Menu - 8 equal-width cells with dropdowns
.main-navigation {
  position: absolute;
  right: 33px; // 33px from right edge for visual continuation effect
  top: 50%;
  transform: translateY(-50%);
  
  .nav-menu {
    // Hide nav menu on smaller screens - show hamburger instead
    @include respond-to(xl) {
      display: none;
    }
    position: relative;
    width: 720px; // 6 cells × 100px + 1 cell × 120px = 720px exactly
    height: $header-height;
    border: 1px solid $color-white;
    border-bottom: none; // Remove bottom border since it's handled by site-header::after
    border-top: none; // Remove top border since it's handled by site-header::before
    
    // Base nav link styles
    %nav-link-base {
      position: absolute;
      top: 0;
      width: 100px; // Equal width for all cells
      height: $header-height;
      color: $color-white;
      text-decoration: none;
      text-transform: uppercase;
      letter-spacing: 0.5px;
      font-weight: $font-weight-medium;
      font-family: $font-primary;
      font-size: 12px;
      @include flex-center;
      box-sizing: border-box;
      background-color: transparent;
      transition: background-color $transition-fast;
      
      // Remove browser default focus outline
      outline: none;
      
      &:hover {
        background-color: rgba($color-white, 0.1);
      }
      
      &:focus {
        background-color: rgba($color-white, 0.1);
        box-shadow: inset 0 0 0 2px rgba($color-white, 0.3);
      }
      
      &.active {
        background-color: rgba($color-white, 0.1);
      }
      
      // Vertical divider - contained within cell height
      &::after {
        content: '';
        position: absolute;
        right: 0;
        top: 1px;
        bottom: 1px;
        width: 1px;
        background-color: $color-white;
      }
      
      // Remove divider from last cell
      &:last-child::after {
        display: none;
      }
    }
    
    // About button - Cell 1
    .nav-link-about {
      @extend %nav-link-base;
      left: 0;
    }
    
    // Product button - Cell 2
    .nav-link-product {
      @extend %nav-link-base;
      left: 100px;
    }
    
    // Industries button - Cell 3
    .nav-link-industries {
      @extend %nav-link-base;
      left: 200px;
    }
    
    // Testimonials button - Cell 4 (slightly wider)
    .nav-link-success-stories {
      @extend %nav-link-base;
      left: 300px;
      width: 120px; // Slightly wider for "TESTIMONIALS"
    }
    
    // Grants button - Cell 5
    .nav-link-grants {
      @extend %nav-link-base;
      left: 420px; // Adjusted for wider testimonials cell (300 + 120)
    }
    
    // Blog button - Cell 6
    .nav-link-blog {
      @extend %nav-link-base;
      left: 520px; // Adjusted for wider testimonials cell (420 + 100)
    }
    
    // Contact button - Cell 7 (subtle yellow highlight, no right divider)
    .nav-link-contact {
      @extend %nav-link-base;
      left: 620px; // Adjusted for wider testimonials cell (520 + 100)
      color: $color-accent; // Yellow text
      
      &:hover {
        background-color: rgba($color-accent, 0.1);
      }
      
      &::after {
        display: none;
      }
    }
  }
  
  // Hide desktop nav on mobile
  @include respond-to(xl) {
    .nav-menu {
      display: none;
    }
  }
}

// SIMPLE MOBILE HAMBURGER MENU CONTAINER
.mobile-menu-container {
  display: none;
  position: absolute;
  right: 20px;
  top: 50%;
  transform: translateY(-50%);
  z-index: 9999;
  
  @include respond-to(xl) {
    display: block;
  }
}

// SIMPLE HAMBURGER BUTTON
.mobile-hamburger {
  background: none;
  border: none;
  cursor: pointer;
  padding: 10px;
  width: 44px;
  height: 44px;
  position: relative;
  z-index: 10000;
  // Mobile touch optimization
  touch-action: manipulation;
  -webkit-tap-highlight-color: transparent;
  user-select: none;
  -webkit-user-select: none;
  
  span {
    display: block;
    width: 25px;
    height: 3px;
    background: #fff;
    margin: 5px 0;
    transition: all 0.3s ease;
    position: relative;
  }
  
  &:hover span {
    background: #ffbc41;
  }
  
  // Animation when menu is open
  &.active span:nth-child(1) {
    transform: rotate(45deg) translate(8px, 8px);
  }
  
  &.active span:nth-child(2) {
    opacity: 0;
  }
  
  &.active span:nth-child(3) {
    transform: rotate(-45deg) translate(8px, -8px);
  }
}

// MOBILE NAVIGATION OVERLAY
.mobile-nav-overlay {
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background: rgba(0, 0, 0, 0.95);
  z-index: 999999;
  opacity: 0;
  visibility: hidden;
  transition: all 0.3s ease;
  
  &.active {
    opacity: 1;
    visibility: visible;
  }
  
  .mobile-nav-content {
    height: 100%;
    display: flex;
    flex-direction: column;
    padding: 20px;
  }
  
  .mobile-nav-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 20px 0;
    border-bottom: 1px solid rgba(255, 255, 255, 0.1);
    
    .mobile-logo {
      height: 32px;
    }
    
    .mobile-nav-close {
      background: none;
      border: none;
      color: #fff;
      font-size: 32px;
      cursor: pointer;
      padding: 0;
      width: 40px;
      height: 40px;
      display: flex;
      align-items: center;
      justify-content: center;
      
      &:hover {
        color: #ffbc41;
      }
    }
  }
  
  .mobile-nav-menu {
    flex: 1;
    display: flex;
    flex-direction: column;
    justify-content: center;
    gap: 20px;
    padding: 40px 0;
    
    .mobile-nav-link {
      color: #fff;
      text-decoration: none;
      font-size: 24px;
      font-weight: 600;
      font-family: $font-primary;
      text-transform: uppercase;
      letter-spacing: 1px;
      padding: 15px 0;
      border-bottom: 1px solid rgba(255, 255, 255, 0.1);
      transition: all 0.3s ease;
      
      &:hover {
        color: #ffbc41;
        padding-left: 20px;
      }
      
      &.active {
        color: #ffbc41;
      }
    }
  }
}

// Mobile Navigation
.mobile-navigation {
  display: none;
  position: fixed;
  top: $header-height;
  width: 100%;
  background: $header-bg;
  z-index: $z-dropdown;
  
  &.active {
    display: block;
  }
  
  .mobile-nav-content {
    padding: $spacing-md;
    
    .mobile-nav-menu {
      .mobile-nav-link {
        display: block;
        color: $color-white;
        text-decoration: none;
        padding: $spacing-md 0;
        border-bottom: 1px solid $color-gray-dark;
        text-transform: uppercase;
        font-family: $font-primary;
        transition: color $transition-fast;
        
        &:hover {
          color: $color-accent;
        }
        
        &.contact {
          color: $color-accent;
          font-weight: $font-weight-semibold;
        }
      }
    }
  }
}

// Responsive behavior - adjust container for new navigation width
@include respond-to(xl) {
  .header-container {
    padding: 0 $spacing-md; // Use standard mobile padding for mobile hamburger menu
  }
  
  .main-navigation .nav-menu {
    display: none;
  }
  
  .site-branding .logo-cell {
    width: auto;
    border: none;
    
    .site-logo img {
      height: 24px;
    }
  }
}
